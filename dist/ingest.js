<<<<<<< HEAD
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.IngestAPI=e():t.IngestAPI=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){function o(t){t&&t.token&&this.setToken(t.token)}var r=n(2),i=n(3),s={host:"http://weasley.teamspace.ad:8080",videos:"/videos",videoById:"/videos/<%=id%>"};o.prototype.setToken=function(t){if(!t||"string"!=typeof t)throw new Error("IngestAPI requires an authentication token passed as a string.");this.token=t},o.prototype.getToken=function(){if(!this.token)throw new Error("IngestAPI requires a token to be set.");return this.token},o.prototype.getVideos=function(t){return new r({url:s.host+s.videos,token:this.getToken(),headers:t})},o.prototype.getVideoById=function(t){return t&&"string"==typeof t?new r({url:this.parseId(s.host+s.videoById,t),token:this.getToken()}):this.promisify(!1,"IngestAPI getVideoById requires a valid videoId as a string.")},o.prototype.addVideo=function(t){if(!t||"object"!=typeof t)return this.promisify(!1,"IngestAPI addVideo requires a video object.");try{t=JSON.stringify(t)}catch(e){return this.promisify(!1,"IngestAPI addVideo failed to parse videoObject to JSON. "+e.stack)}return new r({url:s.host+s.videos,token:this.getToken(),method:"POST",data:t})},o.prototype.deleteVideo=function(t){return t&&"string"==typeof t?new r({url:this.parseId(s.host+s.videoById,t),token:this.getToken(),method:"DELETE"}):this.promisify(!1,"IngestAPI deleteVideo requires a video ID passed as a string.")},o.prototype.getVideosCount=function(){return new r({url:s.host+s.videos,token:this.getToken(),method:"HEAD"}).then(this.getVideosCountResponse.bind(this))},o.prototype.getVideosCountResponse=function(t){return parseInt(t.headers("Resource-Count"),10)},o.prototype.parseId=function(t,e){var n=t.replace("<%=id%>",e);return n},o.prototype.promisify=function(t,e){var n=i();return n(t,[e]),n},t.exports=o},function(t,e,n){var o=n(3),r=n(7),i=[200,201,202,204],s=function(t){return this.defaults={async:!0,method:"GET"},this.promise=o(),this.request=new XMLHttpRequest,this.setupListeners(),this.options=r(!0,this.defaults,t),this.options.url?(this.makeRequest(),this.promise):this.promise(!1,["Request Error : a url is required to make the request."])};s.prototype.setupListeners=function(){this.request.addEventListener("readystatechange",this.readyStateChange.bind(this))},s.prototype.makeRequest=function(){this.request.open(this.options.method,this.options.url,this.options.async),this.options.headers&&this.applyRequestHeaders(this.options.headers),this.options.token&&this.request.setRequestHeader("Authorization",this.options.token),this.options.data?(this.request.setRequestHeader("Content-type","application/json; charset=utf-8"),this.request.send(this.options.data)):this.request.send()},s.prototype.applyRequestHeaders=function(t){for(key in t)t.hasOwnProperty(key)&&this.request.setRequestHeader(key,t[key])},s.prototype.requestComplete=function(t){this.response=this.processResponse(t),this.promise(!this.response.error,[this.response])},s.prototype.processResponse=function(t){var e=this.request.getResponseHeader("Content-type"),n=t;if("application/json; charset=utf-8"===e)try{n=JSON.parse(t)}catch(o){n={error:"JSON parsing failed. "+o.stack}}return{data:n,headers:this.request.getResponseHeader.bind(this.request),statusCode:this.request.status}},s.prototype.requestError=function(t){this.promise(!1,[t])},s.prototype.readyStateChange=function(){4===this.request.readyState&&(this.isValidResponseCode(this.request.status)?this.requestComplete(this.request.responseText):this.requestError("Invalid response code."))},s.prototype.isValidResponseCode=function(t){var e,n=!1,o=i.length;for(e=0;o>e;e++)if(t===i[e]){n=!0;break}return n},t.exports=s},function(t,e,n){(function(t,e,n){!function(t){function o(t){return"function"==typeof t}function r(t){return"object"==typeof t}function i(t){"undefined"!=typeof e?e(t):"undefined"!=typeof n&&n.nextTick?n.nextTick(t):setTimeout(t,0)}var s;t[0][t[1]]=function u(t){var e,n=[],a=[],p=function(t,o){return null==e&&null!=t&&(e=t,n=o,a.length&&i(function(){for(var t=0;t<a.length;t++)a[t]()})),e};return p.then=function(p,c){var f=u(t),d=function(){function t(e){var n,i=0;try{if(e&&(r(e)||o(e))&&o(n=e.then)){if(e===f)throw new TypeError;n.call(e,function(){i++||t.apply(s,arguments)},function(t){i++||f(!1,[t])})}else f(!0,arguments)}catch(u){i++||f(!1,[u])}}try{var i=e?p:c;o(i)?t(i.apply(s,n||[])):f(e,n)}catch(u){f(!1,[u])}};return null!=e?i(d):a.push(d),f},t&&(p=t(p)),p}}([t,"exports"])}).call(e,n(4)(t),n(5).setImmediate,n(6))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){(function(t,o){function r(t,e){this._id=t,this._clearFn=e}var i=n(6).nextTick,s=Function.prototype.apply,u=Array.prototype.slice,a={},p=0;e.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=p++,o=arguments.length<2?!1:u.call(arguments,1);return a[n]=!0,i(function(){a[n]&&(o?t.apply(null,o):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof o?o:function(t){delete a[t]}}).call(e,n(5).setImmediate,n(5).clearImmediate)},function(t,e){function n(){p=!1,s.length?a=s.concat(a):c=-1,a.length&&o()}function o(){if(!p){var t=setTimeout(n);p=!0;for(var e=a.length;e;){for(s=a,a=[];++c<e;)s&&s[c].run();c=-1,e=a.length}s=null,p=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function i(){}var s,u=t.exports={},a=[],p=!1,c=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];a.push(new r(t,e)),1!==a.length||p||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},i=function(t){if(!t||"[object Object]"!==o.call(t))return!1;var e=n.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var i;for(i in t);return"undefined"==typeof i||n.call(t,i)};t.exports=function s(){var t,e,n,o,u,a,p=arguments[0],c=1,f=arguments.length,d=!1;for("boolean"==typeof p?(d=p,p=arguments[1]||{},c=2):("object"!=typeof p&&"function"!=typeof p||null==p)&&(p={});f>c;++c)if(t=arguments[c],null!=t)for(e in t)n=p[e],o=t[e],p!==o&&(d&&o&&(i(o)||(u=r(o)))?(u?(u=!1,a=n&&r(n)?n:[]):a=n&&i(n)?n:{},p[e]=s(d,a,o)):"undefined"!=typeof o&&(p[e]=o));return p}}])});
=======
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.IngestAPI=t():e.IngestAPI=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){function o(e){e&&e.token&&this.setToken(e.token)}var r=n(2),i=n(3),s={host:"http://weasley.teamspace.ad:8080",videos:"/videos",videoById:"/videos/<%=id%>",trash:"/videos?filter=trashed"};o.prototype.setToken=function(e){if(!e||"string"!=typeof e)throw new Error("IngestAPI requires an authentication token passed as a string.");this.token=e},o.prototype.getToken=function(){if(!this.token)throw new Error("IngestAPI requires a token to be set.");return this.token},o.prototype.getVideos=function(e){return new r({url:s.host+s.videos,token:this.getToken(),headers:e})},o.prototype.getVideoById=function(e){return e&&"string"==typeof e?new r({url:this.parseId(s.host+s.videoById,e),token:this.getToken()}):this.promisify(!1,"IngestAPI getVideoById requires a valid videoId as a string.")},o.prototype.addVideo=function(e){if(!e||"object"!=typeof e)return this.promisify(!1,"IngestAPI addVideo requires a video object.");try{e=JSON.stringify(e)}catch(t){return this.promisify(!1,"IngestAPI addVideo failed to parse videoObject to JSON. "+t.stack)}return new r({url:s.host+s.videos,token:this.getToken(),method:"POST",data:e})},o.prototype.deleteVideo=function(e){return e&&"string"==typeof e?new r({url:this.parseId(s.host+s.videoById,e),token:this.getToken(),method:"DELETE"}):this.promisify(!1,"IngestAPI deleteVideo requires a video ID passed as a string.")},o.prototype.getTrashedVideosCount=function(){return new r({url:s.host+s.trash,token:this.getToken(),method:"HEAD"}).then(this.getTrashedVideosCountResponse.bind(this))},o.prototype.getTrashedVideosCountResponse=function(e){return parseInt(e.headers("Resource-Count"),10)},o.prototype.parseId=function(e,t){var n=e.replace("<%=id%>",t);return n},o.prototype.promisify=function(e,t){var n=i();return n(e,[t]),n},e.exports=o},function(e,t,n){var o=n(3),r=n(7),i=[200,201,202,204],s=function(e){return this.defaults={async:!0,method:"GET"},this.promise=o(),this.request=new XMLHttpRequest,this.setupListeners(),this.options=r(!0,this.defaults,e),this.options.url?(this.makeRequest(),this.promise):this.promise(!1,["Request Error : a url is required to make the request."])};s.prototype.setupListeners=function(){this.request.addEventListener("readystatechange",this.readyStateChange.bind(this))},s.prototype.makeRequest=function(){this.request.open(this.options.method,this.options.url,this.options.async),this.options.headers&&this.applyRequestHeaders(this.options.headers),this.options.token&&this.request.setRequestHeader("Authorization",this.options.token),this.options.data?(this.request.setRequestHeader("Content-type","application/json; charset=utf-8"),this.request.send(this.options.data)):this.request.send()},s.prototype.applyRequestHeaders=function(e){for(key in e)e.hasOwnProperty(key)&&this.request.setRequestHeader(key,e[key])},s.prototype.requestComplete=function(e){this.response=this.processResponse(e),this.promise(!this.response.error,[this.response])},s.prototype.processResponse=function(e){var t=this.request.getResponseHeader("Content-type"),n=e;if("application/json; charset=utf-8"===t)try{n=JSON.parse(e)}catch(o){n={error:"JSON parsing failed. "+o.stack}}return{data:n,headers:this.request.getResponseHeader.bind(this.request),statusCode:this.request.status}},s.prototype.requestError=function(e){this.promise(!1,[e])},s.prototype.readyStateChange=function(){4===this.request.readyState&&(this.isValidResponseCode(this.request.status)?this.requestComplete(this.request.responseText):this.requestError("Invalid response code."))},s.prototype.isValidResponseCode=function(e){var t,n=!1,o=i.length;for(t=0;o>t;t++)if(e===i[t]){n=!0;break}return n},e.exports=s},function(e,t,n){(function(e,t,n){!function(e){function o(e){return"function"==typeof e}function r(e){return"object"==typeof e}function i(e){"undefined"!=typeof t?t(e):"undefined"!=typeof n&&n.nextTick?n.nextTick(e):setTimeout(e,0)}var s;e[0][e[1]]=function u(e){var t,n=[],a=[],p=function(e,o){return null==t&&null!=e&&(t=e,n=o,a.length&&i(function(){for(var e=0;e<a.length;e++)a[e]()})),t};return p.then=function(p,c){var f=u(e),d=function(){function e(t){var n,i=0;try{if(t&&(r(t)||o(t))&&o(n=t.then)){if(t===f)throw new TypeError;n.call(t,function(){i++||e.apply(s,arguments)},function(e){i++||f(!1,[e])})}else f(!0,arguments)}catch(u){i++||f(!1,[u])}}try{var i=t?p:c;o(i)?e(i.apply(s,n||[])):f(t,n)}catch(u){f(!1,[u])}};return null!=t?i(d):a.push(d),f},e&&(p=e(p)),p}}([e,"exports"])}).call(t,n(4)(e),n(5).setImmediate,n(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){(function(e,o){function r(e,t){this._id=e,this._clearFn=t}var i=n(6).nextTick,s=Function.prototype.apply,u=Array.prototype.slice,a={},p=0;t.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=p++,o=arguments.length<2?!1:u.call(arguments,1);return a[n]=!0,i(function(){a[n]&&(o?e.apply(null,o):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof o?o:function(e){delete a[e]}}).call(t,n(5).setImmediate,n(5).clearImmediate)},function(e,t){function n(){p=!1,s.length?a=s.concat(a):c=-1,a.length&&o()}function o(){if(!p){var e=setTimeout(n);p=!0;for(var t=a.length;t;){for(s=a,a=[];++c<t;)s&&s[c].run();c=-1,t=a.length}s=null,p=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function i(){}var s,u=e.exports={},a=[],p=!1,c=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new r(e,t)),1!==a.length||p||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},i=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t=n.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var i;for(i in e);return"undefined"==typeof i||n.call(e,i)};e.exports=function s(){var e,t,n,o,u,a,p=arguments[0],c=1,f=arguments.length,d=!1;for("boolean"==typeof p?(d=p,p=arguments[1]||{},c=2):("object"!=typeof p&&"function"!=typeof p||null==p)&&(p={});f>c;++c)if(e=arguments[c],null!=e)for(t in e)n=p[t],o=e[t],p!==o&&(d&&o&&(i(o)||(u=r(o)))?(u?(u=!1,a=n&&r(n)?n:[]):a=n&&i(n)?n:{},p[t]=s(d,a,o)):"undefined"!=typeof o&&(p[t]=o));return p}}])});
>>>>>>> INGEST-680 : added method for getting the trashed videos count.
//# sourceMappingURL=ingest.js.map